#user root;
worker_processes 8;
worker_rlimit_nofile 65535;
events {
	use  epoll;
	worker_connections 65535;
}
http {
    client_body_buffer_size 2048k;
    client_max_body_size 200m;
    client_body_in_single_buffer off;
    fastcgi_buffers 8 128k;
    send_timeout 300;
    fastcgi_connect_timeout 300s;
    fastcgi_send_timeout 300s;
    fastcgi_read_timeout 300s;
    fastcgi_buffer_size 64k;
    fastcgi_busy_buffers_size 128k;
    fastcgi_temp_file_write_size 128k;
	tcp_nopush on;
    tcp_nodelay on;
    server_tokens off;
	keepalive_timeout 600;
    server_names_hash_bucket_size 1024;
    proxy_connect_timeout 80s;
    proxy_read_timeout 3000s;
    proxy_next_upstream error timeout;
    proxy_next_upstream_tries 3;
    #proxy_next_upstream error timeout invalid_header http_500 http_503 http_404 http_502;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

	error_page 400 401 402 403 404 405 408 410 412 413 414 415 /404.html;
    error_page   500 502 503 504  /50x.html;

	log_format  main_response escape=json '$remote_addr||-||$remote_user||[$time_local]||'
	'$request||$status||$body_bytes_sent||'
	'$http_referer||$http_user_agent||'
	'$http_x_forwarded_for||$request_time||$upstream_response_time||'
	'$upstream_addr||$upstream_status||'
	'||$upstream_http_pinpoint_traceid||$request_body||$resp_body||'
	'$http_cookie||-$portalReqUser||$http_requserid||$http_reqstageenv||$upstreamenv||$http_reqorgcode';

	access_log  logs/access.log  main_response;

  	# map get env from ReqUserId header
	map $http_requserid $upstreamenv {
		#default prod;
    	default stage;
        ~*^21110141 stage;
        ~*^200051729$ stage;
        ~*^200013834$ stage;
        ~*^200190308$ stage;
        ~*^229034991837$ stage;
		#~*^195542725022$ stage;
        #~*^183718352900$ stage;
		#~*^16917871873$ stage;
    	#~*^180824622854$ stage;
    	#~*^218884531901$ stage;
	}

	# map get env from ReqOrgCode header
	map $http_reqorgcode $reqorgcode_env {
		~*^13227009978$ stage;
	}

    upstream k8s_traefik {
	    keepalive 1800;
	    #keepalive_timeout 7d;
		server 10.145.167.36:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.37:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.38:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.39:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.40:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.41:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.42:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.43:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.44:8181 max_fails=3 fail_timeout=30s;
		#server 10.145.167.45:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.46:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.47:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.48:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.49:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.50:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.51:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.52:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.53:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.54:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.55:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.56:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.57:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.58:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.59:8181 max_fails=3 fail_timeout=30s;
		server 10.145.167.60:8181 max_fails=3 fail_timeout=30s;
    }
	upstream lts_web {
	    server 10.145.167.36:30129;
	    server 10.145.167.37:30129;
	    server 10.145.167.38:30129;
	    server 10.145.167.39:30129;
	    server 10.145.167.40:30129;
	    server 10.145.167.41:30129;
	    server 10.145.167.42:30129;
	    server 10.145.167.43:30129;
	    server 10.145.167.44:30129;
	    server 10.145.167.45:30129;
	    server 10.145.167.46:30129;
	    server 10.145.167.47:30129;
	    server 10.145.167.48:30129;
	    server 10.145.167.49:30129;
	    server 10.145.167.50:30129;
	    server 10.145.167.51:30129;
	    server 10.145.167.52:30129;
	    server 10.145.167.53:30129;
	    server 10.145.167.54:30129;
	    server 10.145.167.55:30129;
		server 10.145.167.56:30129;
	    server 10.145.167.57:30129;
	    server 10.145.167.58:30129;
	    server 10.145.167.59:30129;
	    server 10.145.167.60:30129;
    }
	upstream bas_web {
		server 10.145.167.36:30105;
		server 10.145.167.37:30105;
		server 10.145.167.38:30105;
		server 10.145.167.39:30105;
		server 10.145.167.40:30105;
		server 10.145.167.41:30105;
		server 10.145.167.42:30105;
		server 10.145.167.43:30105;
		server 10.145.167.44:30105;
		server 10.145.167.45:30105;
		server 10.145.167.46:30105;
		server 10.145.167.47:30105;
		server 10.145.167.48:30105;
		server 10.145.167.49:30105;
		server 10.145.167.50:30105;
		server 10.145.167.51:30105;
		server 10.145.167.52:30105;
		server 10.145.167.53:30105;
		server 10.145.167.54:30105;
		server 10.145.167.55:30105;
		server 10.145.167.56:30105;
		server 10.145.167.57:30105;
		server 10.145.167.58:30105;
		server 10.145.167.59:30105;
		server 10.145.167.60:30105;
    }
	upstream ue_bas_web {
        server 10.145.167.36:31105;
        server 10.145.167.37:31105;
        server 10.145.167.38:31105;
        server 10.145.167.39:31105;
        server 10.145.167.40:31105;
        server 10.145.167.41:31105;
        server 10.145.167.42:31105;
        server 10.145.167.43:31105;
        server 10.145.167.44:31105;
        server 10.145.167.45:31105;
        server 10.145.167.46:31105;
        server 10.145.167.47:31105;
        server 10.145.167.48:31105;
        server 10.145.167.49:31105;
        server 10.145.167.50:31105;
        server 10.145.167.51:31105;
        server 10.145.167.52:31105;
        server 10.145.167.53:31105;
        server 10.145.167.54:31105;
        server 10.145.167.55:31105;
		server 10.145.167.56:31105;
        server 10.145.167.57:31105;
        server 10.145.167.58:31105;
        server 10.145.167.59:31105;
        server 10.145.167.60:31105;
    }
	upstream res_web {
        server 10.145.167.36:30106;
        server 10.145.167.37:30106;
        server 10.145.167.38:30106;
        server 10.145.167.39:30106;
        server 10.145.167.40:30106;
        server 10.145.167.41:30106;
        server 10.145.167.42:30106;
        server 10.145.167.43:30106;
        server 10.145.167.44:30106;
        server 10.145.167.45:30106;
        server 10.145.167.46:30106;
        server 10.145.167.47:30106;
        server 10.145.167.48:30106;
        server 10.145.167.49:30106;
        server 10.145.167.50:30106;
        server 10.145.167.51:30106;
        server 10.145.167.52:30106;
        server 10.145.167.53:30106;
        server 10.145.167.54:30106;
        server 10.145.167.55:30106;
		server 10.145.167.56:30106;
        server 10.145.167.57:30106;
        server 10.145.167.58:30106;
        server 10.145.167.59:30106;
        server 10.145.167.60:30106;
    }
	upstream ue_res_web {
        server 10.145.167.36:31106;
        server 10.145.167.37:31106;
        server 10.145.167.38:31106;
        server 10.145.167.39:31106;
        server 10.145.167.40:31106;
        server 10.145.167.41:31106;
        server 10.145.167.42:31106;
        server 10.145.167.43:31106;
        server 10.145.167.44:31106;
        server 10.145.167.45:31106;
        server 10.145.167.46:31106;
        server 10.145.167.47:31106;
        server 10.145.167.48:31106;
        server 10.145.167.49:31106;
        server 10.145.167.50:31106;
        server 10.145.167.51:31106;
        server 10.145.167.52:31106;
        server 10.145.167.53:31106;
        server 10.145.167.54:31106;
        server 10.145.167.55:31106;
		server 10.145.167.56:31106;
        server 10.145.167.57:31106;
        server 10.145.167.58:31106;
        server 10.145.167.59:31106;
        server 10.145.167.60:31106;
    }
	upstream cpc1_web {
        server 10.145.167.36:30108;
        server 10.145.167.37:30108;
        server 10.145.167.38:30108;
        server 10.145.167.39:30108;
        server 10.145.167.40:30108;
        server 10.145.167.41:30108;
        server 10.145.167.42:30108;
        server 10.145.167.43:30108;
        server 10.145.167.44:30108;
        server 10.145.167.45:30108;
        server 10.145.167.46:30108;
        server 10.145.167.47:30108;
        server 10.145.167.48:30108;
        server 10.145.167.49:30108;
        server 10.145.167.50:30108;
        server 10.145.167.51:30108;
        server 10.145.167.52:30108;
        server 10.145.167.53:30108;
        server 10.145.167.54:30108;
        server 10.145.167.55:30108;
		server 10.145.167.56:30108;
        server 10.145.167.57:30108;
        server 10.145.167.58:30108;
        server 10.145.167.59:30108;
        server 10.145.167.60:30108;
    }
	upstream ue_cpc1_web {
        server 10.145.167.36:31108;
        server 10.145.167.37:31108;
        server 10.145.167.38:31108;
        server 10.145.167.39:31108;
        server 10.145.167.40:31108;
        server 10.145.167.41:31108;
        server 10.145.167.42:31108;
        server 10.145.167.43:31108;
        server 10.145.167.44:31108;
        server 10.145.167.45:31108;
        server 10.145.167.46:31108;
        server 10.145.167.47:31108;
        server 10.145.167.48:31108;
        server 10.145.167.49:31108;
        server 10.145.167.50:31108;
        server 10.145.167.51:31108;
        server 10.145.167.52:31108;
        server 10.145.167.53:31108;
        server 10.145.167.54:31108;
        server 10.145.167.55:31108;
		server 10.145.167.56:31108;
        server 10.145.167.57:31108;
        server 10.145.167.58:31108;
        server 10.145.167.59:31108;
        server 10.145.167.60:31108;
    }
  	upstream prod_biz_web {
        server 10.145.167.36:30126;
        server 10.145.167.37:30126;
        server 10.145.167.38:30126;
        server 10.145.167.39:30126;
        server 10.145.167.40:30126;
        server 10.145.167.41:30126;
        server 10.145.167.42:30126;
        server 10.145.167.43:30126;
        server 10.145.167.44:30126;
        server 10.145.167.45:30126;
        server 10.145.167.46:30126;
        server 10.145.167.47:30126;
        server 10.145.167.48:30126;
        server 10.145.167.49:30126;
        server 10.145.167.50:30126;
        server 10.145.167.51:30126;
        server 10.145.167.52:30126;
        server 10.145.167.53:30126;
        server 10.145.167.54:30126;
        server 10.145.167.55:30126;
		server 10.145.167.56:30126;
        server 10.145.167.57:30126;
        server 10.145.167.58:30126;
        server 10.145.167.59:30126;
        server 10.145.167.60:30126;
    }
    upstream prod_biz_course {
        server 10.145.167.36:30326;
        server 10.145.167.37:30326;
        server 10.145.167.38:30326;
        server 10.145.167.39:30326;
        server 10.145.167.40:30326;
        server 10.145.167.41:30326;
        server 10.145.167.42:30326;
        server 10.145.167.43:30326;
        server 10.145.167.44:30326;
        server 10.145.167.45:30326;
        server 10.145.167.46:30326;
        server 10.145.167.47:30326;
        server 10.145.167.48:30326;
        server 10.145.167.49:30326;
        server 10.145.167.50:30326;
        server 10.145.167.51:30326;
        server 10.145.167.52:30326;
        server 10.145.167.53:30326;
        server 10.145.167.54:30326;
        server 10.145.167.55:30326;
		server 10.145.167.56:30326;
        server 10.145.167.57:30326;
        server 10.145.167.58:30326;
        server 10.145.167.59:30326;
        server 10.145.167.60:30326;
    }
  	upstream ue_biz_web {
        server 10.145.167.36:31126;
        server 10.145.167.37:31126;
        server 10.145.167.38:31126;
        server 10.145.167.39:31126;
        server 10.145.167.40:31126;
        server 10.145.167.41:31126;
        server 10.145.167.42:31126;
        server 10.145.167.43:31126;
        server 10.145.167.44:31126;
        server 10.145.167.45:31126;
        server 10.145.167.46:31126;
        server 10.145.167.47:31126;
        server 10.145.167.48:31126;
        server 10.145.167.49:31126;
        server 10.145.167.50:31126;
        server 10.145.167.51:31126;
        server 10.145.167.52:31126;
        server 10.145.167.53:31126;
        server 10.145.167.54:31126;
        server 10.145.167.55:31126;
		server 10.145.167.56:31126;
        server 10.145.167.57:31126;
        server 10.145.167.58:31126;
        server 10.145.167.59:31126;
        server 10.145.167.60:31126;
    }
	upstream stage_biz_web {
        server 10.145.167.36:30626;
        server 10.145.167.37:30626;
        server 10.145.167.38:30626;
        server 10.145.167.39:30626;
        server 10.145.167.40:30626;
        server 10.145.167.41:30626;
        server 10.145.167.42:30626;
        server 10.145.167.43:30626;
        server 10.145.167.44:30626;
        server 10.145.167.45:30626;
        server 10.145.167.46:30626;
        server 10.145.167.47:30626;
        server 10.145.167.48:30626;
        server 10.145.167.49:30626;
        server 10.145.167.50:30626;
        server 10.145.167.51:30626;
        server 10.145.167.52:30626;
        server 10.145.167.53:30626;
        server 10.145.167.54:30626;
        server 10.145.167.55:30626;
		server 10.145.167.56:30626;
        server 10.145.167.57:30626;
        server 10.145.167.58:30626;
        server 10.145.167.59:30626;
        server 10.145.167.60:30626;
    }
	upstream cmb_web {
        server 10.145.167.36:30128;
        server 10.145.167.37:30128;
        server 10.145.167.38:30128;
        server 10.145.167.39:30128;
        server 10.145.167.40:30128;
        server 10.145.167.41:30128;
        server 10.145.167.42:30128;
        server 10.145.167.43:30128;
        server 10.145.167.44:30128;
        server 10.145.167.45:30128;
        server 10.145.167.46:30128;
        server 10.145.167.47:30128;
        server 10.145.167.48:30128;
        server 10.145.167.49:30128;
        server 10.145.167.50:30128;
        server 10.145.167.51:30128;
        server 10.145.167.52:30128;
        server 10.145.167.53:30128;
        server 10.145.167.54:30128;
        server 10.145.167.55:30128;
		server 10.145.167.56:30128;
        server 10.145.167.57:30128;
        server 10.145.167.58:30128;
        server 10.145.167.59:30128;
        server 10.145.167.60:30128;
    }
	upstream ue_cmb_web {
        server 10.145.167.36:31128;
        server 10.145.167.37:31128;
        server 10.145.167.38:31128;
        server 10.145.167.39:31128;
        server 10.145.167.40:31128;
        server 10.145.167.41:31128;
        server 10.145.167.42:31128;
        server 10.145.167.43:31128;
        server 10.145.167.44:31128;
        server 10.145.167.45:31128;
        server 10.145.167.46:31128;
        server 10.145.167.47:31128;
        server 10.145.167.48:31128;
        server 10.145.167.49:31128;
        server 10.145.167.50:31128;
        server 10.145.167.51:31128;
        server 10.145.167.52:31128;
        server 10.145.167.53:31128;
        server 10.145.167.54:31128;
        server 10.145.167.55:31128;
		server 10.145.167.56:31128;
        server 10.145.167.57:31128;
        server 10.145.167.58:31128;
        server 10.145.167.59:31128;
        server 10.145.167.60:31128;
    }
	upstream aeap_web {
        server 10.145.167.36:30131;
        server 10.145.167.37:30131;
        server 10.145.167.38:30131;
        server 10.145.167.39:30131;
        server 10.145.167.40:30131;
        server 10.145.167.41:30131;
        server 10.145.167.42:30131;
        server 10.145.167.43:30131;
        server 10.145.167.44:30131;
        server 10.145.167.45:30131;
        server 10.145.167.46:30131;
        server 10.145.167.47:30131;
        server 10.145.167.48:30131;
        server 10.145.167.49:30131;
        server 10.145.167.50:30131;
        server 10.145.167.51:30131;
        server 10.145.167.52:30131;
        server 10.145.167.53:30131;
        server 10.145.167.54:30131;
        server 10.145.167.55:30131;
		server 10.145.167.56:30131;
        server 10.145.167.57:30131;
        server 10.145.167.58:30131;
        server 10.145.167.59:30131;
        server 10.145.167.60:30131;
    }
	upstream aeap_service {
        server 10.145.167.36:30231;
        server 10.145.167.37:30231;
        server 10.145.167.38:30231;
        server 10.145.167.39:30231;
        server 10.145.167.40:30231;
        server 10.145.167.41:30231;
        server 10.145.167.42:30231;
        server 10.145.167.43:30231;
        server 10.145.167.44:30231;
        server 10.145.167.45:30231;
        server 10.145.167.46:30231;
        server 10.145.167.47:30231;
        server 10.145.167.48:30231;
        server 10.145.167.49:30231;
        server 10.145.167.50:30231;
        server 10.145.167.51:30231;
        server 10.145.167.52:30231;
        server 10.145.167.53:30231;
        server 10.145.167.54:30231;
        server 10.145.167.55:30231;
		server 10.145.167.56:30231;
        server 10.145.167.57:30231;
        server 10.145.167.58:30231;
        server 10.145.167.59:30231;
        server 10.145.167.60:30231;
    }
	upstream cpc1web_web {
        server 10.145.167.36:30116;
        server 10.145.167.37:30116;
        server 10.145.167.38:30116;
        server 10.145.167.39:30116;
        server 10.145.167.40:30116;
        server 10.145.167.41:30116;
        server 10.145.167.42:30116;
        server 10.145.167.43:30116;
        server 10.145.167.44:30116;
        server 10.145.167.45:30116;
        server 10.145.167.46:30116;
        server 10.145.167.47:30116;
        server 10.145.167.48:30116;
        server 10.145.167.49:30116;
        server 10.145.167.50:30116;
        server 10.145.167.51:30116;
        server 10.145.167.52:30116;
        server 10.145.167.53:30116;
        server 10.145.167.54:30116;
        server 10.145.167.55:30116;
		server 10.145.167.56:30116;
        server 10.145.167.57:30116;
        server 10.145.167.58:30116;
        server 10.145.167.59:30116;
        server 10.145.167.60:30116;
    }
	upstream ue_cpc1web_web {
        server 10.145.167.36:31116;
        server 10.145.167.37:31116;
        server 10.145.167.38:31116;
        server 10.145.167.39:31116;
        server 10.145.167.40:31116;
        server 10.145.167.41:31116;
        server 10.145.167.42:31116;
        server 10.145.167.43:31116;
        server 10.145.167.44:31116;
        server 10.145.167.45:31116;
        server 10.145.167.46:31116;
        server 10.145.167.47:31116;
        server 10.145.167.48:31116;
        server 10.145.167.49:31116;
        server 10.145.167.50:31116;
        server 10.145.167.51:31116;
        server 10.145.167.52:31116;
        server 10.145.167.53:31116;
        server 10.145.167.54:31116;
        server 10.145.167.55:31116;
        server 10.145.167.56:31116;
        server 10.145.167.57:31116;
        server 10.145.167.58:31116;
        server 10.145.167.59:31116;
        server 10.145.167.60:31116;
    }
    upstream monitor_web {
        server 10.145.167.36:30226;
        server 10.145.167.37:30226;
        server 10.145.167.38:30226;
        server 10.145.167.39:30226;
        server 10.145.167.40:30226;
        server 10.145.167.41:30226;
        server 10.145.167.42:30226;
        server 10.145.167.43:30226;
        server 10.145.167.44:30226;
        server 10.145.167.45:30226;
        server 10.145.167.46:30226;
        server 10.145.167.47:30226;
        server 10.145.167.48:30226;
        server 10.145.167.49:30226;
        server 10.145.167.50:30226;
        server 10.145.167.51:30226;
        server 10.145.167.52:30226;
        server 10.145.167.53:30226;
        server 10.145.167.54:30226;
        server 10.145.167.55:30226;
		server 10.145.167.56:30226;
        server 10.145.167.57:30226;
        server 10.145.167.58:30226;
        server 10.145.167.59:30226;
        server 10.145.167.60:30226;
    }
	upstream ue_aeap_web {
        server 10.145.167.36:31131;
        server 10.145.167.37:31131;
        server 10.145.167.38:31131;
        server 10.145.167.39:31131;
        server 10.145.167.40:31131;
        server 10.145.167.41:31131;
        server 10.145.167.42:31131;
        server 10.145.167.43:31131;
        server 10.145.167.44:31131;
        server 10.145.167.45:31131;
        server 10.145.167.46:31131;
        server 10.145.167.47:31131;
        server 10.145.167.48:31131;
        server 10.145.167.49:31131;
        server 10.145.167.50:31131;
        server 10.145.167.51:31131;
        server 10.145.167.52:31131;
        server 10.145.167.53:31131;
        server 10.145.167.54:31131;
        server 10.145.167.55:31131;
		server 10.145.167.56:31131;
        server 10.145.167.57:31131;
        server 10.145.167.58:31131;
        server 10.145.167.59:31131;
        server 10.145.167.60:31131;
    }
	upstream ue_aeap_service {
	
        server 10.145.167.36:31231;
        server 10.145.167.37:31231;
        server 10.145.167.38:31231;
        server 10.145.167.39:31231;
        server 10.145.167.40:31231;
        server 10.145.167.41:31231;
        server 10.145.167.42:31231;
        server 10.145.167.43:31231;
        server 10.145.167.44:31231;
        server 10.145.167.45:31231;
        server 10.145.167.46:31231;
        server 10.145.167.47:31231;
        server 10.145.167.48:31231;
        server 10.145.167.49:31231;
        server 10.145.167.50:31231;
        server 10.145.167.51:31231;
        server 10.145.167.52:31231;
        server 10.145.167.53:31231;
        server 10.145.167.54:31231;
        server 10.145.167.55:31231;
		server 10.145.167.56:31231;
        server 10.145.167.57:31231;
        server 10.145.167.58:31231;
        server 10.145.167.59:31231;
        server 10.145.167.60:31231;
    }
	upstream lgs_web {
        server 10.145.167.36:30133;
        server 10.145.167.37:30133;
        server 10.145.167.38:30133;
        server 10.145.167.39:30133;
        server 10.145.167.40:30133;
        server 10.145.167.41:30133;
        server 10.145.167.42:30133;
        server 10.145.167.43:30133;
        server 10.145.167.44:30133;
        server 10.145.167.45:30133;
        server 10.145.167.46:30133;
        server 10.145.167.47:30133;
        server 10.145.167.48:30133;
        server 10.145.167.49:30133;
        server 10.145.167.50:30133;
        server 10.145.167.51:30133;
        server 10.145.167.52:30133;
        server 10.145.167.53:30133;
        server 10.145.167.54:30133;
        server 10.145.167.55:30133;
		server 10.145.167.56:30133;
        server 10.145.167.57:30133;
        server 10.145.167.58:30133;
        server 10.145.167.59:30133;
        server 10.145.167.60:30133;
    }
	upstream ue_lgs_web {
        server 10.145.167.36:31133;
        server 10.145.167.37:31133;
        server 10.145.167.38:31133;
        server 10.145.167.39:31133;
        server 10.145.167.40:31133;
        server 10.145.167.41:31133;
        server 10.145.167.42:31133;
        server 10.145.167.43:31133;
        server 10.145.167.44:31133;
        server 10.145.167.45:31133;
        server 10.145.167.46:31133;
        server 10.145.167.47:31133;
        server 10.145.167.48:31133;
        server 10.145.167.49:31133;
        server 10.145.167.50:31133;
        server 10.145.167.51:31133;
        server 10.145.167.52:31133;
        server 10.145.167.53:31133;
        server 10.145.167.54:31133;
        server 10.145.167.55:31133;
		server 10.145.167.56:31133;
        server 10.145.167.57:31133;
        server 10.145.167.58:31133;
        server 10.145.167.59:31133;
        server 10.145.167.60:31133;
    }

	upstream ecp_web {
        server 10.145.167.36:30119;
        server 10.145.167.37:30119;
        server 10.145.167.38:30119;
        server 10.145.167.39:30119;
        server 10.145.167.40:30119;
        server 10.145.167.41:30119;
        server 10.145.167.42:30119;
        server 10.145.167.43:30119;
        server 10.145.167.44:30119;
        server 10.145.167.45:30119;
        server 10.145.167.46:30119;
        server 10.145.167.47:30119;
        server 10.145.167.48:30119;
        server 10.145.167.49:30119;
        server 10.145.167.50:30119;
        server 10.145.167.51:30119;
        server 10.145.167.52:30119;
        server 10.145.167.53:30119;
        server 10.145.167.54:30119;
        server 10.145.167.55:30119;
		server 10.145.167.56:30119;
        server 10.145.167.57:30119;
        server 10.145.167.58:30119;
        server 10.145.167.59:30119;
        server 10.145.167.60:30119;
    }

	upstream ue_ecp_web {
        server 10.145.167.36:31119;
        server 10.145.167.37:31119;
        server 10.145.167.38:31119;
        server 10.145.167.39:31119;
        server 10.145.167.40:31119;
        server 10.145.167.41:31119;
        server 10.145.167.42:31119;
        server 10.145.167.43:31119;
        server 10.145.167.44:31119;
        server 10.145.167.45:31119;
        server 10.145.167.46:31119;
        server 10.145.167.47:31119;
        server 10.145.167.48:31119;
        server 10.145.167.49:31119;
        server 10.145.167.50:31119;
        server 10.145.167.51:31119;
        server 10.145.167.52:31119;
        server 10.145.167.53:31119;
        server 10.145.167.54:31119;
        server 10.145.167.55:31119;
		server 10.145.167.56:31119;
        server 10.145.167.57:31119;
        server 10.145.167.58:31119;
        server 10.145.167.59:31119;
        server 10.145.167.60:31119;
    }


    server {
        listen 80;
		charset utf-8;
        server_name fe.sh.ctc.com;
        proxy_http_version 1.1;
		access_log  logs/fe_access.log main_response;
		error_log logs/fe_error.log warn;
##############统一nginx_log_format配置,避免nginx_log_format报错####################
		location /a/b/c/d/e/f/n/g/{
			set $portalReqUser '';
			set $upstreamenv '';
			root /app/confengine/nginx/html;
			index index.html;
		}
##############统一nginx_log_format配置,避免nginx_log_format报错####################
        location /{
            root /app/confengine/nginx/html;
            index index.html;
        }
		location /stt/ {
			proxy_pass http://10.145.167.200:8051;
		}
		location /qcdr/ {
			proxy_pass http://10.145.167.201:8052;
		}
		location /detect/ {
			proxy_pass http://10.145.167.202:8053;
		}
		location /gth/ {
			proxy_pass http://10.145.167.203:8054;
		}
		location /plac/ {
			proxy_pass http://10.145.167.204:8055;
		}
		location /pyz/ {
			proxy_pass http://10.145.167.205:8056;
		}
		location /lgs/ {
			proxy_pass http://10.145.167.206:8057;
		}
    	location /lgs/fe/ {
        	proxy_pass http://lgs_web/;
		    proxy_set_header Host $http_host;
        }
		location /gis/ {
			proxy_pass http://10.145.167.207:8058;
		}
		location /aeap/ {
			proxy_pass http://10.145.167.208:8059;
		}
		location /aeap/fe/ {
			proxy_pass http://aeap_web/;
        }
		location /aeap/fe/tele {
            proxy_pass http://aeap_service/tele;
        }
		location /datamgr/ {
            proxy_pass http://10.145.167.209:8060;
        }
		location /lts/ {
            proxy_pass http://10.145.167.210:8061;
        }
		location /lts/fe/ {
        	proxy_pass http://lts_web/;
		    proxy_set_header Host $http_host;
        }
		location /cmb/ {
            proxy_pass http://10.145.167.211:8062;
        }
		location /cmb/fe/ {
            proxy_pass http://cmb_web/;
        }
		location /acct/ {
            proxy_pass http://10.145.167.212:8063;
        }
		location /biz/ {
            proxy_pass http://10.145.167.213:8064;
        }
    	location /biz/fe/ {
        	proxy_pass http://prod_biz_web/;
        }
		#location /biz/fe {
			#if ($upstreamenv = "prod") {
				#rewrite ^/ http://fe.sh.ctc.com/prod_biz_web/;
			#}
			#if ($upstreamenv = "stage") {
				#rewrite ^/  http://fe.sh.ctc.com/stage_biz_web/;
			#}
		#}
		#location /prod_biz_web/ {
			#proxy_pass http://prod_biz_web/;
		#}
		#location /stage_biz_web/ {
			#proxy_pass http://stage_biz_web/;
		#}
    	location /biz/fe/monitor/ {
        	proxy_pass http://monitor_web/;
      		proxy_set_header Host $http_host;
        }
        location /biz/fe/course/ {
        	proxy_pass http://prod_biz_course/;
      		proxy_set_header Host $http_host;
        }
		location /uam/ {
            proxy_pass http://10.145.167.214:8065;
        }
		location /bde/ {
            proxy_pass http://10.145.167.215:8066;
        }
		location /grt/ {
            proxy_pass http://10.145.167.216:8067;
        }
		location /cep/ {
            proxy_pass http://10.145.167.217:8068;
        }
		location /rate/ {
            proxy_pass http://10.145.167.218:8069;
        }
		location /plat/ {
            proxy_pass http://10.145.167.219:8070;
        }
		location /ecp/ {
            proxy_pass http://10.145.167.220:8071;
        }
		location /ecp/fe/ {
        	proxy_pass http://ecp_web/;
		    proxy_set_header Host $http_host;
        }
		location /eop/ {
            proxy_pass http://10.145.167.221:8072;
        }
		location /cache/ {
			proxy_pass http://10.145.167.222:8073;
        }
		location /cpc1web/ {
        	proxy_pass http://10.145.167.223:8074;
        }
		location /cpc1web/fe/ {
        	proxy_pass http://cpc1web_web/;
        }
		location /ibp/ {
            proxy_pass http://10.145.167.224:8075;
        }
		location /vc/ {
            proxy_pass http://10.145.167.225:8076;
        }
		location /cpc2/ {
            proxy_pass http://10.145.167.226:8077;
        }
		location /idc/ {
            proxy_pass http://10.145.167.227:8078;
        }
		location /ict/ {
            proxy_pass http://10.145.167.228:8079;
        }
		location /cus/ {
            proxy_pass http://10.145.167.229:8080;
        }
		location /ord/ {
            proxy_pass http://10.145.167.230:8081;
        }
		location /cpc1/ {
            proxy_pass http://10.145.167.231:8082;
        }
		location /cpc1/fe/ {
            proxy_pass http://cpc1_web/;
			proxy_set_header Host $http_host;
        }
		location /msc/ {
            proxy_pass http://10.145.167.232:8083;
        }
		location /res/ {
            proxy_pass http://10.145.167.233:8084;
        }
		location /res/fe/ {
            proxy_pass http://res_web/;
        }
		location /bas/ {
            proxy_pass http://10.145.167.234:8085;
        }
		location /bas/fe/ {
            proxy_pass http://bas_web/;
        }
		location /pay/ {
            proxy_pass http://10.145.167.235:8086;
        }
		location /chm/ {
            proxy_pass http://10.145.167.236:8087;
        }
		location /srv/ {
            proxy_pass http://10.145.167.237:8088;
        }
		location /opt/ {
            proxy_pass http://10.145.167.238:8089;
        }
    }
######################################################################################
####################上面是天翼云准生产环境，下面是天翼云用户测试环境##################
######################################################################################
    server {
        listen 80;
		charset utf-8;
        server_name fe.ue.sh.ctc.com;
        proxy_http_version 1.1;
        access_log  logs/fe_access.log main_response;
		error_log logs/fe_error.log warn;
        location /{
            root /app/confengine/nginx/html;
            index index.html index.php index.htm;
        }
		location /stt/ {
			proxy_pass http://10.145.167.159:8151;
		}
		location /qcdr/ {
			proxy_pass http://10.145.167.162:8152;
		}
		location /detect/ {
			proxy_pass http://10.145.167.163:8153;
		}
		location /gth/ {
			proxy_pass http://10.145.167.164:8154;
		}
		location /plac/ {
			proxy_pass http://10.145.167.165:8155;
		}
		location /pyz/ {
			proxy_pass http://10.145.167.166:8156;
		}
		location /lgs/ {
			proxy_pass http://10.145.167.167:8157;
		}
		location /lgs/fe/ {
        	proxy_pass http://ue_lgs_web/;
		    proxy_set_header Host $http_host;
        }
		location /gis/ {
			proxy_pass http://10.145.167.168:8158;
		}
		location /aeap/ {
            proxy_pass http://10.145.167.169:8159;
        }
		location /aeap/fe/ {
			proxy_pass http://ue_aeap_web/;
        }
		location /aeap/fe/tele {
            proxy_pass http://ue_aeap_service/tele;
        }
		location /datamgr/ {
            proxy_pass http://10.145.167.170:8160;
        }
		location /lts/ {
            proxy_pass http://10.145.167.171:8161;
        }
		location /cmb/ {
            proxy_pass http://10.145.167.172:8162;
        }
		location /cmb/fe/ {
            proxy_pass http://ue_cmb_web/;
        }
		location /cpc1web/fe/ {
        	proxy_pass http://ue_cpc1web_web/;
        }
		location /acct/ {
            proxy_pass http://10.145.167.173:8163;
        }
		location /biz/ {
            proxy_pass http://10.145.167.174:8164;
        }
    	location /biz/fe/{
			proxy_pass http://ue_biz_web/;
		}
		location /uam/ {
            proxy_pass http://10.145.167.175:8165;
        }
		location /bde/ {
            proxy_pass http://10.145.167.176:8166;
        }
		location /grt/ {
			proxy_pass http://10.145.167.177:8167;
        }
		location /cep/ {
            proxy_pass http://10.145.167.178:8168;
        }
		location /rate/ {
            proxy_pass http://10.145.167.179:8169;
        }
		location /plat/ {
            proxy_pass http://10.145.167.180:8170;
        }
		location /ecp/ {
            proxy_pass http://10.145.167.181:8171;
        }
		location /ecp/fe/ {
        	proxy_pass http://ue_ecp_web/;
		    proxy_set_header Host $http_host;
        }
		location /eop/ {
            proxy_pass http://10.145.167.182:8172;
        }
		location /cache/ {
        	proxy_pass http://10.145.167.183:8173;
        }
		location /cpc1web/ {
        	proxy_pass http://10.145.167.184:8174;
        }
		location /ibp/ {
            proxy_pass http://10.145.167.185:8175;
        }
		location /vc/ {
            proxy_pass http://10.145.167.186:8176;
        }
		location /cpc2/ {
            proxy_pass http://10.145.167.187:8177;
        }
		location /idc/ {
            proxy_pass http://10.145.167.188:8178;
        }
		location /ict/ {
            proxy_pass http://10.145.167.189:8179;
        }
		location /cus/ {
            proxy_pass http://10.145.167.190:8180;
        }
		location /ord/ {
            proxy_pass http://10.145.167.191:8181;
        }
		location /cpc1/ {
            proxy_pass http://10.145.167.192:8182;
        }
		location /cpc1/fe/{
			proxy_pass http://ue_cpc1_web/;
		}
		location /msc/ {
            proxy_pass http://10.145.167.193:8183;
        }
		location /res/ {
            proxy_pass http://10.145.167.194:8184;
        }
        location /res/fe/ {
            proxy_pass http://ue_res_web/;
        }
		location /bas/ {
            proxy_pass http://10.145.167.195:8185;
        }
        location /bas/fe/ {
            proxy_pass http://ue_bas_web/;
        }
		location /pay/ {
            proxy_pass http://10.145.167.196:8186;
        }
		location /chm/ {
            proxy_pass http://10.145.167.197:8187;
        }
		location /srv/ {
            proxy_pass http://10.145.167.198:8188;
        }
		location /opt/ {
            proxy_pass http://10.145.167.199:8189;
        }
    }
######################################################################################
####################以下是门户访问天翼云生产环境入口##################################
######################################################################################
	server {
		listen 8051;
		proxy_http_version 1.1;
		location /stt/ {
			proxy_set_header Host sttgateway.stt.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
  	server {
		listen 8052;
		proxy_http_version 1.1;
		location /qcdr/ {
			proxy_set_header Host qcdrgateway.qcdr.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8053;
		proxy_http_version 1.1;
		location /detect/ {
			proxy_set_header Host detectgateway.detect.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8054;
		proxy_http_version 1.1;
		location /gth/ {
			proxy_set_header Host gthgateway.gth.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8055;
		proxy_http_version 1.1;
		location /plac/ {
			proxy_set_header Host placgateway.plac.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8056;
		proxy_http_version 1.1;
		location /pyzc1/ {
			proxy_set_header Host pyzc1gateway.pyzc1.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		location /pyzc2/ {
			proxy_set_header Host pyzc2gateway.pyzc2.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8057;
		proxy_http_version 1.1;
		location /lgs/ {
			if ($http_reqstageenv = "1") {
				set $upstreamenv "stage";
			}
			if ($reqorgcode_env = "stage") {
				set $upstreamenv "stage";
			}
			proxy_set_header Host lgsgateway.lgs.${upstreamenv}.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8058;
		proxy_http_version 1.1;
		location /gis/ {
			proxy_set_header Host gisgateway.gis.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8059;
		proxy_http_version 1.1;
		location /aeap/ {
			proxy_set_header Host aeapgateway.aeap.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8060;
		proxy_http_version 1.1;
		location /datamgr/ {
			proxy_set_header Host datamgrgateway.datamgr.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8061;
		proxy_http_version 1.1;
		location /lts/ {
			proxy_set_header Host ltsgateway.lts.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8062;
		proxy_http_version 1.1;
		location /cmb/ {
			if ($http_reqstageenv = "1") {
				set $upstreamenv "stage";
			}
			if ($reqorgcode_env = "stage") {
				set $upstreamenv "stage";
			}
			proxy_set_header Host cmbgateway.cmb.${upstreamenv}.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8063;
		proxy_http_version 1.1;
		location /acct/ {
			proxy_set_header Host acctgateway.acct.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8064;
		proxy_http_version 1.1;
		location /biz/ {
			if ($http_reqstageenv = "1") {
				set $upstreamenv "stage";
			}
			if ($reqorgcode_env = "stage") {
				set $upstreamenv "stage";
			}
			proxy_set_header Host bizgateway.biz.${upstreamenv}.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8065;
		proxy_http_version 1.1;
		location /uam/ {
			proxy_set_header Host uamgateway.uam.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8066;
		proxy_http_version 1.1;
		location /bde/ {
			proxy_set_header Host bdegateway.bde.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8067;
		proxy_http_version 1.1;
		location /grt/ {
			proxy_set_header Host grtgateway.grt.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8068;
		proxy_http_version 1.1;
		location /cep/ {
			proxy_set_header Host cepgateway.cep.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8069;
		proxy_http_version 1.1;
		location /rate/ {
			proxy_set_header Host rategateway.rate.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8070;
		proxy_http_version 1.1;
		location /plat/ {
			proxy_set_header Host platgateway.plat.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8071;
		proxy_http_version 1.1;
		location /ecp/ {
			proxy_set_header Host ecpgateway.ecp.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8072;
		proxy_http_version 1.1;
		location /eop/ {
			proxy_set_header Host eopgateway.eop.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8073;
		proxy_http_version 1.1;
		location /cache/ {
			proxy_set_header Host cachegateway.cache.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8074;
		proxy_http_version 1.1;
		location /cpc1web/ {
			if ($http_reqstageenv = "1") {
				set $upstreamenv "stage";
			}
			if ($reqorgcode_env = "stage") {
				set $upstreamenv "stage";
			}
			proxy_set_header Host cpc1webgateway.cpc1web.${upstreamenv}.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8075;
		proxy_http_version 1.1;
		location /ibp/ {
			proxy_set_header Host ibpgateway.ibp.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8076;
		proxy_http_version 1.1;
		location /vc/ {
			proxy_set_header Host vcgateway.vc.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8077;
		proxy_http_version 1.1;
		location /cpc2/ {
			proxy_set_header Host cpc2gateway.cpc2.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8078;
		proxy_http_version 1.1;
		location /idc/ {
			proxy_set_header Host idcgateway.idc.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8079;
		proxy_http_version 1.1;
		location /ict/ {
			proxy_set_header Host ictgateway.ict.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8080;
		proxy_http_version 1.1;
		location /cus/ {
			if ($http_reqstageenv = "1") {
				set $upstreamenv "stage";
			}
			if ($reqorgcode_env = "stage") {
				set $upstreamenv "stage";
			}
			proxy_set_header Host cusgateway.cus.${upstreamenv}.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8081;
		proxy_http_version 1.1;
		location /ord/ {
			if ($http_reqstageenv = "1") {
				set $upstreamenv "stage";
			}
			if ($reqorgcode_env = "stage") {
				set $upstreamenv "stage";
			}
			proxy_set_header Host ordgateway.ord.${upstreamenv}.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8082;
		proxy_http_version 1.1;
		location /cpc1/ {
			if ($http_reqstageenv = "1") {
				set $upstreamenv "stage";
			}
			if ($reqorgcode_env = "stage") {
				set $upstreamenv "stage";
			}
			proxy_set_header Host cpc1gateway.cpc1.${upstreamenv}.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8083;
		proxy_http_version 1.1;
		location /msc/ {
			proxy_set_header Host mscgateway.msc.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8084;
		proxy_http_version 1.1;
		location /res/ {
			if ($http_reqstageenv = "1") {
				set $upstreamenv "stage";
			}
			if ($reqorgcode_env = "stage") {
				set $upstreamenv "stage";
			}
			proxy_set_header Host resgateway.res.${upstreamenv}.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8085;
		proxy_http_version 1.1;
		location /bas/ {
			if ($http_reqstageenv = "1") {
				set $upstreamenv "stage";
			}
			if ($reqorgcode_env = "stage") {
				set $upstreamenv "stage";
			}
			proxy_set_header Host basgateway.bas.${upstreamenv}.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8086;
		proxy_http_version 1.1;
		location /pay/ {
			proxy_set_header Host paygateway.pay.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8087;
		proxy_http_version 1.1;
		location /chm/ {
			proxy_set_header Host chmgateway.chm.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8088;
		proxy_http_version 1.1;
		location /srv/ {
			proxy_set_header Host srvgateway.srv.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 8089;
		proxy_http_version 1.1;
		location /opt/ {
      		if ($http_reqstageenv = "1") {
				set $upstreamenv "stage";
			}
			if ($reqorgcode_env = "stage") {
				set $upstreamenv "stage";
			}
			proxy_set_header Host optgateway.opt.${upstreamenv}.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}

######################################################################################
####################以下是门户访问天翼云灰度环境入口##################################
######################################################################################
	server {
		listen 9051;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /stt/ {
			proxy_set_header Host sttgateway.stt.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
  	server {
		listen 9052;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /qcdr/ {
			proxy_set_header Host qcdrgateway.qcdr.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9053;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /detect/ {
			proxy_set_header Host detectgateway.detect.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9054;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /gth/ {
			proxy_set_header Host gthgateway.gth.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9055;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /plac/ {
			proxy_set_header Host placgateway.plac.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9056;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /pyzc1/ {
			proxy_set_header Host pyzc1gateway.pyzc1.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		location /pyzc2/ {
			proxy_set_header Host pyzc2gateway.pyzc2.prod.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9057;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /lgs/ {
			proxy_set_header Host lgsgateway.lgs.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9058;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /gis/ {
			proxy_set_header Host gisgateway.gis.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9059;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /aeap/ {
			proxy_set_header Host aeapgateway.aeap.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9060;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /datamgr/ {
			proxy_set_header Host datamgrgateway.datamgr.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9061;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /lts/ {
			proxy_set_header Host ltsgateway.lts.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9062;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /cmb/ {
			proxy_set_header Host cmbgateway.cmb.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9063;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /acct/ {
			proxy_set_header Host acctgateway.acct.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9064;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /biz/ {
			proxy_set_header Host bizgateway.biz.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9065;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /uam/ {
			proxy_set_header Host uamgateway.uam.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9066;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /bde/ {
			proxy_set_header Host bdegateway.bde.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9067;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /grt/ {
			proxy_set_header Host grtgateway.grt.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9068;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /cep/ {
			proxy_set_header Host cepgateway.cep.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9069;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /rate/ {
			proxy_set_header Host rategateway.rate.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9070;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /plat/ {
			proxy_set_header Host platgateway.plat.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9071;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /ecp/ {
			proxy_set_header Host ecpgateway.ecp.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9072;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /eop/ {
			proxy_set_header Host eopgateway.eop.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9073;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /cache/ {
			proxy_set_header Host cachegateway.cache.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9074;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /cpc1web/ {
			proxy_set_header Host cpc1webgateway.cpc1web.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9075;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /ibp/ {
			proxy_set_header Host ibpgateway.ibp.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9076;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /vc/ {
			proxy_set_header Host vcgateway.vc.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9077;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /cpc2/ {
			proxy_set_header Host cpc2gateway.cpc2.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9078;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /idc/ {
			proxy_set_header Host idcgateway.idc.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9079;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /ict/ {
			proxy_set_header Host ictgateway.ict.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	 server {
		listen 9080;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /cus/ {
			proxy_set_header Host cusgateway.cus.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9081;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /ord/ {
			proxy_set_header Host ordgateway.ord.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9082;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /cpc1/ {
			proxy_set_header Host cpc1gateway.cpc1.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9083;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /msc/ {
			proxy_set_header Host mscgateway.msc.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9084;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /res/ {
			proxy_set_header Host resgateway.res.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9085;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /bas/ {
			proxy_set_header Host basgateway.bas.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9086;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /pay/ {
			proxy_set_header Host paygateway.pay.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9087;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /chm/ {
			proxy_set_header Host chmgateway.chm.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9088;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /srv/ {
			proxy_set_header Host srvgateway.srv.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
	server {
		listen 9089;
		proxy_http_version 1.1;
		set $upstreamenv stage;
		location /opt/ {
			proxy_set_header Host optgateway.opt.stage.com;
			proxy_pass http://k8s_traefik/;
		}
		lua_need_request_body on;
		set $resp_body "";
		body_filter_by_lua '
		local resp_body = string.sub(ngx.arg[1], 1, 200000)
		  ngx.ctx.buffered = (ngx.ctx.buffered or "") .. resp_body
		  if ngx.arg[2] then
			ngx.var.resp_body = ngx.ctx.buffered
		  end
		';
	}
}
